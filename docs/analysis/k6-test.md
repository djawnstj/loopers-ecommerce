# K6 부하 테스트 성능 분석 비교

상품 목록 조회 API의 부하 테스트를 데이터베이스 인덱스 최적화 전후로 비교 분석하였습니다. <br>
동시 사용자 100명, 40초간 테스트를 진행하였으며, 각 테스트는 상품 목록 API와 상품 상세 API를 혼합하여 실행하였습니다. <br>

테스트 순서는 다음과 같습니다.

1. 인덱스 최적화 이전 부하 테스트
2. 인덱스 최적화 이후 부하 테스트
3. 캐시 적용 이후 부하 테스트

## 1. 인덱스 최적화 이전 부하 테스트

### 테스트 설정

- **테스트 시간**: 40초간
- **동시 사용자**: 최대 100명

### 성능 결과

| 지표       | 값               |
|----------|-----------------|
| 총 요청 수   | 453개            |
| HTTP 성공률 | 55.4% (251/453) |
| 평균 응답시간  | 4,176ms         |
| 95% 응답시간 | 15,001ms        |
| 최대 응답시간  | 15,015ms        |
| 처리량      | 8.27 req/s      |

## 2. 인덱스 최적화 이후 부하 테스트

### 테스트 설정

- **테스트 시간**: 40초간
- **동시 사용자**: 최대 100명
- **인덱스 추가**
    ```sql
    create index idx_product_brand_like_count
    on product (brand_id, like_count desc);
    ```

### 성능 결과

| 지표       | 값                   |
|----------|---------------------|
| 총 요청 수   | 1,165개              |
| HTTP 성공률 | 95.1% (1,108/1,165) |
| 평균 응답시간  | 14.3ms              |
| 95% 응답시간 | 32.1ms              |
| 최대 응답시간  | 70.4ms              |
| 처리량      | 27.5 req/s          |

## 3. 캐시 적용 이후 부하 테스트

### 테스트 설정

- **테스트 시간**: 40초간
- **동시 사용자**: 최대 100명
- **레디스 캐시 추가**

### 레디스 캐시 추가

### 성능 결과

| 지표       | 값                   |
|----------|---------------------|
| 총 요청 수   | 1,173개              |
| HTTP 성공률 | 96.2% (1,129/1,173) |
| 평균 응답시간  | 13.9ms              |
| 95% 응답시간 | 32.0ms              |
| 최대 응답시간  | 92.1ms              |
| 처리량      | 27.6 req/s          |

## 비교 분석

### 성능 비교표

| 시나리오         | 처리량        | 평균 응답시간 | 95% 응답시간 | HTTP 성공률 |
|--------------|------------|---------|----------|----------|
| 1. 최적화 이전    | 8.27 req/s | 4,176ms | 15,001ms | 55.4%    |
| 2. 인덱스 적용 이후 | 27.5 req/s | 14.3ms  | 32.1ms   | 95.1%    |
| 3. 캐시 적용 이후  | 27.6 req/s | 13.9ms  | 32.0ms   | 96.2%    |

